[env:esp32-minimal]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Optimización EXTREMA para tamaño
build_flags = 
    -Os                      ; Optimizar para tamaño (no velocidad)
    -DCORE_DEBUG_LEVEL=0     ; Sin debug para ahorrar espacio
    -DARDUINO_USB_CDC_ON_BOOT=0
    -ffunction-sections      ; Separar funciones para eliminación
    -fdata-sections          ; Separar datos para eliminación
    -Wl,--gc-sections        ; Eliminar secciones no usadas
    -Wl,--strip-all          ; Eliminar símbolos de debug
    -fno-rtti                ; Sin información de tipos en runtime
    -fno-exceptions          ; Sin manejo de excepciones C++
    -std=gnu++17             ; Estándar C++17

; Librería más liviana para audio
lib_deps = 
    earlephilhower/ESP8266Audio@^1.9.7

; Configuración de partición para más espacio de programa
board_build.partitions = huge_app.csv
board_build.filesystem = littlefs

; Configuración de memoria optimizada
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
